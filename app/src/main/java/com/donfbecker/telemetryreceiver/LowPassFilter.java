package com.donfbecker.telemetryreceiver;

public class LowPassFilter {
    private final int SAMPLE_SIZE = 480;
    //private float[] coefficients = {0.0006920f,0.0009442f,0.0013667f,0.0020309f,0.0030003f,0.0043263f,0.0060426f,0.0081621f,0.0106741f,0.0135433f,0.0167100f,0.0200920f,0.0235883f,0.0270835f,0.0304538f,0.0335729f,0.0363196f,0.0385836f,0.0402719f,0.0413143f,0.0416667f,0.0413143f,0.0402719f,0.0385836f,0.0363196f,0.0335729f,0.0304538f,0.0270835f,0.0235883f,0.0200920f,0.0167100f,0.0135433f,0.0106741f,0.0081621f,0.0060426f,0.0043263f,0.0030003f,0.0020309f,0.0013667f,0.0009442f};

    //Filter Order: 480 Sampling Frequency (Hz): 48000.000000 Cut-Off Frequency Lo (Hz): 1000.000000 Cut-Off Frequency Hi (Hz): 1000.000000
    //private float[] coefficients = {0.20000000f,-0.0000151f,-0.0000302f,-0.0000449f,-0.0000591f,-0.0000725f,-0.0000850f,-0.0000963f,-0.0001063f,-0.0001147f,-0.0001215f,-0.0001263f,-0.0001292f,-0.0001301f,-0.0001287f,-0.0001251f,-0.0001193f,-0.0001112f,-0.0001010f,-0.0000886f,-0.0000742f,-0.0000579f,-0.0000400f,-0.0000206f,0.0000000f,0.0000215f,0.0000436f,0.0000659f,0.0000880f,0.0001097f,0.0001304f,0.0001499f,0.0001676f,0.0001831f,0.0001962f,0.0002063f,0.0002133f,0.0002168f,0.0002166f,0.0002124f,0.0002042f,0.0001918f,0.0001753f,0.0001548f,0.0001304f,0.0001024f,0.0000710f,0.0000367f,0.0000000f,-0.0000387f,-0.0000786f,-0.0001192f,-0.0001597f,-0.0001995f,-0.0002376f,-0.0002733f,-0.0003060f,-0.0003346f,-0.0003587f,-0.0003774f,-0.0003902f,-0.0003965f,-0.0003960f,-0.0003881f,-0.0003728f,-0.0003499f,-0.0003195f,-0.0002818f,-0.0002370f,-0.0001858f,-0.0001287f,-0.0000665f,0.0000000f,0.0000697f,0.0001414f,0.0002140f,0.0002861f,0.0003565f,0.0004237f,0.0004863f,0.0005431f,0.0005926f,0.0006337f,0.0006652f,0.0006860f,0.0006954f,0.0006927f,0.0006773f,0.0006489f,0.0006075f,0.0005534f,0.0004868f,0.0004085f,0.0003194f,0.0002207f,0.0001137f,0.0000000f,-0.0001186f,-0.0002401f,-0.0003625f,-0.0004835f,-0.0006010f,-0.0007126f,-0.0008161f,-0.0009092f,-0.0009899f,-0.0010561f,-0.0011061f,-0.0011383f,-0.0011515f,-0.0011445f,-0.0011166f,-0.0010677f,-0.0009976f,-0.0009069f,-0.0007962f,-0.0006669f,-0.0005205f,-0.0003589f,-0.0001846f,0.0000000f,0.0001918f,0.0003878f,0.0005845f,0.0007784f,0.0009661f,0.0011438f,0.0013079f,0.0014551f,0.0015820f,0.0016856f,0.0017632f,0.0018123f,0.0018310f,0.0018177f,0.0017716f,0.0016921f,0.0015795f,0.0014344f,0.0012583f,0.0010530f,0.0008212f,0.0005659f,0.0002908f,0.0000000f,-0.0003019f,-0.0006099f,-0.0009188f,-0.0012232f,-0.0015175f,-0.0017961f,-0.0020534f,-0.0022841f,-0.0024831f,-0.0026457f,-0.0027675f,-0.0028448f,-0.0028747f,-0.0028546f,-0.0027830f,-0.0026593f,-0.0024834f,-0.0022566f,-0.0019807f,-0.0016588f,-0.0012946f,-0.0008929f,-0.0004593f,0.0000000f,0.0004779f,0.0009667f,0.0014584f,0.0019444f,0.0024161f,0.0028645f,0.0032809f,0.0036566f,0.0039835f,0.0042535f,0.0044598f,0.0045958f,0.0046562f,0.0046365f,0.0045335f,0.0043454f,0.0040713f,0.0037122f,0.0032703f,0.0027493f,0.0021544f,0.0014923f,0.0007710f,0.0000000f,-0.0008100f,-0.0016472f,-0.0024987f,-0.0033508f,-0.0041890f,-0.0049985f,-0.0057640f,-0.0064701f,-0.0071016f,-0.0076435f,-0.0080815f,-0.0084020f,-0.0085923f,-0.0086409f,-0.0085378f,-0.0082745f,-0.0078442f,-0.0072419f,-0.0064647f,-0.0055118f,-0.0043843f,-0.0030857f,-0.0016216f,0.0000000f,0.0017693f,0.0036744f,0.0057011f,0.0078340f,0.0100554f,0.0123467f,0.0146876f,0.0170571f,0.0194334f,0.0217938f,0.0241158f,0.0263767f,0.0285542f,0.0306263f,0.0325722f,0.0343719f,0.0360069f,0.0374604f,0.0387171f,0.0397638f,0.0405897f,0.0411859f,0.0415462f,0.0416667f,0.0415462f,0.0411859f,0.0405897f,0.0397638f,0.0387171f,0.0374604f,0.0360069f,0.0343719f,0.0325722f,0.0306263f,0.0285542f,0.0263767f,0.0241158f,0.0217938f,0.0194334f,0.0170571f,0.0146876f,0.0123467f,0.0100554f,0.0078340f,0.0057011f,0.0036744f,0.0017693f,0.0000000f,-0.0016216f,-0.0030857f,-0.0043843f,-0.0055118f,-0.0064647f,-0.0072419f,-0.0078442f,-0.0082745f,-0.0085378f,-0.0086409f,-0.0085923f,-0.0084020f,-0.0080815f,-0.0076435f,-0.0071016f,-0.0064701f,-0.0057640f,-0.0049985f,-0.0041890f,-0.0033508f,-0.0024987f,-0.0016472f,-0.0008100f,0.0000000f,0.0007710f,0.0014923f,0.0021544f,0.0027493f,0.0032703f,0.0037122f,0.0040713f,0.0043454f,0.0045335f,0.0046365f,0.0046562f,0.0045958f,0.0044598f,0.0042535f,0.0039835f,0.0036566f,0.0032809f,0.0028645f,0.0024161f,0.0019444f,0.0014584f,0.0009667f,0.0004779f,0.0000000f,-0.0004593f,-0.0008929f,-0.0012946f,-0.0016588f,-0.0019807f,-0.0022566f,-0.0024834f,-0.0026593f,-0.0027830f,-0.0028546f,-0.0028747f,-0.0028448f,-0.0027675f,-0.0026457f,-0.0024831f,-0.0022841f,-0.0020534f,-0.0017961f,-0.0015175f,-0.0012232f,-0.0009188f,-0.0006099f,-0.0003019f,0.0000000f,0.0002908f,0.0005659f,0.0008212f,0.0010530f,0.0012583f,0.0014344f,0.0015795f,0.0016921f,0.0017716f,0.0018177f,0.0018310f,0.0018123f,0.0017632f,0.0016856f,0.0015820f,0.0014551f,0.0013079f,0.0011438f,0.0009661f,0.0007784f,0.0005845f,0.0003878f,0.0001918f,0.0000000f,-0.0001846f,-0.0003589f,-0.0005205f,-0.0006669f,-0.0007962f,-0.0009069f,-0.0009976f,-0.0010677f,-0.0011166f,-0.0011445f,-0.0011515f,-0.0011383f,-0.0011061f,-0.0010561f,-0.0009899f,-0.0009092f,-0.0008161f,-0.0007126f,-0.0006010f,-0.0004835f,-0.0003625f,-0.0002401f,-0.0001186f,0.0000000f,0.0001137f,0.0002207f,0.0003194f,0.0004085f,0.0004868f,0.0005534f,0.0006075f,0.0006489f,0.0006773f,0.0006927f,0.0006954f,0.0006860f,0.0006652f,0.0006337f,0.0005926f,0.0005431f,0.0004863f,0.0004237f,0.0003565f,0.0002861f,0.0002140f,0.0001414f,0.0000697f,0.0000000f,-0.0000665f,-0.0001287f,-0.0001858f,-0.0002370f,-0.0002818f,-0.0003195f,-0.0003499f,-0.0003728f,-0.0003881f,-0.0003960f,-0.0003965f,-0.0003902f,-0.0003774f,-0.0003587f,-0.0003346f,-0.0003060f,-0.0002733f,-0.0002376f,-0.0001995f,-0.0001597f,-0.0001192f,-0.0000786f,-0.0000387f,0.0000000f,0.0000367f,0.0000710f,0.0001024f,0.0001304f,0.0001548f,0.0001753f,0.0001918f,0.0002042f,0.0002124f,0.0002166f,0.0002168f,0.0002133f,0.0002063f,0.0001962f,0.0001831f,0.0001676f,0.0001499f,0.0001304f,0.0001097f,0.0000880f,0.0000659f,0.0000436f,0.0000215f,0.0000000f,-0.0000206f,-0.0000400f,-0.0000579f,-0.0000742f,-0.0000886f,-0.0001010f,-0.0001112f,-0.0001193f,-0.0001251f,-0.0001287f,-0.0001301f,-0.0001292f,-0.0001263f,-0.0001215f,-0.0001147f,-0.0001063f,-0.0000963f,-0.0000850f,-0.0000725f,-0.0000591f,-0.0000449f,-0.0000302f,-0.0000151f};


    //Filter Order: 480 Sampling Frequency (Hz): 48000.000000 Cut-Off Frequency Lo (Hz): 1000.000000 Cut-Off Frequency Hi (Hz): 20.000000
    //private float[] coefficients = {0.0000000f,-0.0008840f,-0.0017910f,-0.0027069f,-0.0036172f,-0.0045064f,-0.0053590f,-0.0061593f,-0.0068916f,-0.0075405f,-0.0080912f,-0.0085294f,-0.0088419f,-0.0090168f,-0.0090431f,-0.0089115f,-0.0086145f,-0.0081462f,-0.0075026f,-0.0066819f,-0.0056841f,-0.0045116f,-0.0031686f,-0.0016619f,0.0000000f,0.0018064f,0.0037448f,0.0058006f,0.0079577f,0.0101987f,0.0125044f,0.0148548f,0.0172290f,0.0196053f,0.0219617f,0.0242759f,0.0265258f,0.0286897f,0.0307464f,0.0326756f,0.0344581f,0.0360760f,0.0375132f,0.0387550f,0.0397887f,0.0406040f,0.0411923f,0.0415478f,0.0416667f,0.0415478f,0.0411923f,0.0406040f,0.0397887f,0.0387550f,0.0375132f,0.0360760f,0.0344581f,0.0326756f,0.0307464f,0.0286897f,0.0265258f,0.0242759f,0.0219617f,0.0196053f,0.0172290f,0.0148548f,0.0125044f,0.0101987f,0.0079577f,0.0058006f,0.0037448f,0.0018064f,0.0000000f,-0.0016619f,-0.0031686f,-0.0045116f,-0.0056841f,-0.0066819f,-0.0075026f,-0.0081462f,-0.0086145f,-0.0089115f,-0.0090431f,-0.0090168f,-0.0088419f,-0.0085294f,-0.0080912f,-0.0075405f,-0.0068916f,-0.0061593f,-0.0053590f,-0.0045064f,-0.0036172f,-0.0027069f,-0.0017910f,-0.0008840f,0.0000000f,0.0008479f,0.0016477f,0.0023885f,0.0030607f,0.0036561f,0.0041681f,0.0045915f,0.0049226f,0.0051593f,0.0053011f,0.0053489f,0.0053052f,0.0051736f,0.0049591f,0.0046679f,0.0043073f,0.0038851f,0.0034103f,0.0028922f,0.0023405f,0.0017654f,0.0011769f,0.0005852f,0.0000000f,-0.0005691f,-0.0011133f,-0.0016242f,-0.0020941f,-0.0025166f,-0.0028856f,-0.0031966f,-0.0034458f,-0.0036306f,-0.0037496f,-0.0038022f,-0.0037894f,-0.0037128f,-0.0035752f,-0.0033802f,-0.0031326f,-0.0028374f,-0.0025009f,-0.0021294f,-0.0017299f,-0.0013098f,-0.0008764f,-0.0004373f,0.0000000f,0.0004283f,0.0008407f,0.0012304f,0.0015915f,0.0019186f,0.0022067f,0.0024518f,0.0026506f,0.0028008f,0.0029006f,0.0029494f,0.0029473f,0.0028953f,0.0027951f,0.0026494f,0.0024613f,0.0022348f,0.0019744f,0.0016850f,0.0013720f,0.0010411f,0.0006982f,0.0003491f,0.0000000f,-0.0003434f,-0.0006753f,-0.0009903f,-0.0012835f,-0.0015502f,-0.0017863f,-0.0019884f,-0.0021536f,-0.0022797f,-0.0023651f,-0.0024091f,-0.0024114f,-0.0023728f,-0.0022945f,-0.0021784f,-0.0020269f,-0.0018433f,-0.0016310f,-0.0013941f,-0.0011368f,-0.0008639f,-0.0005802f,-0.0002905f,0.0000000f,0.0002865f,0.0005643f,0.0008287f,0.0010754f,0.0013005f,0.0015005f,0.0016724f,0.0018136f,0.0019221f,0.0019965f,0.0020360f,0.0020404f,0.0020101f,0.0019460f,0.0018496f,0.0017229f,0.0015685f,0.0013894f,0.0011888f,0.0009705f,0.0007383f,0.0004963f,0.0002488f,0.0000000f,-0.0002458f,-0.0004846f,-0.0007124f,-0.0009253f,-0.0011201f,-0.0012936f,-0.0014430f,-0.0015663f,-0.0016615f,-0.0017273f,-0.0017631f,-0.0017684f,-0.0017436f,-0.0016894f,-0.0016070f,-0.0014982f,-0.0013650f,-0.0012101f,-0.0010362f,-0.0008466f,-0.0006445f,-0.0004336f,-0.0002175f,0.0000000f,0.0002153f,0.0004247f,0.0006247f,0.0008120f,0.0009836f,0.0011368f,0.0012690f,0.0013783f,0.0014631f,0.0015221f,0.0015546f,0.0015603f,0.0015394f,0.0014925f,0.0014207f,0.0013253f,0.0012083f,0.0010718f,0.0009184f,0.0007507f,0.0005719f,0.0003850f,0.0001932f,0.0000000f,-0.0001915f,-0.0003779f,-0.0005562f,-0.0007234f,-0.0008768f,-0.0010139f,-0.0011324f,-0.0012306f,-0.0013070f,-0.0013605f,-0.0013902f,-0.0013961f,-0.0013781f,-0.0013368f,-0.0012731f,-0.0011882f,-0.0010838f,-0.0009619f,-0.0008246f,-0.0006744f,-0.0005140f,-0.0003462f,-0.0001738f,0.0000000f,0.0001724f,0.0003404f,0.0005013f,0.0006523f,0.0007909f,0.0009150f,0.0010224f,0.0011116f,0.0011810f,0.0012299f,0.0012573f,0.0012631f,0.0012474f,0.0012105f,0.0011533f,0.0010768f,0.0009826f,0.0008724f,0.0007482f,0.0006121f,0.0004667f,0.0003144f,0.0001580f,0.0000000f,-0.0001568f,-0.0003097f,-0.0004562f,-0.0005939f,-0.0007204f,-0.0008336f,-0.0009319f,-0.0010135f,-0.0010772f,-0.0011221f,-0.0011476f,-0.0011533f,-0.0011393f,-0.0011060f,-0.0010541f,-0.0009845f,-0.0008987f,-0.0007982f,-0.0006847f,-0.0005604f,-0.0004274f,-0.0002881f,-0.0001448f,0.0000000f,0.0001438f,0.0002841f,0.0004186f,0.0005451f,0.0006613f,0.0007656f,0.0008560f,0.0009313f,0.0009902f,0.0010318f,0.0010555f,0.0010610f,0.0010485f,0.0010181f,0.0009706f,0.0009068f,0.0008280f,0.0007356f,0.0006312f,0.0005167f,0.0003942f,0.0002658f,0.0001336f,0.0000000f,-0.0001327f,-0.0002624f,-0.0003867f,-0.0005037f,-0.0006113f,-0.0007078f,-0.0007916f,-0.0008615f,-0.0009161f,-0.0009549f,-0.0009770f,-0.0009824f,-0.0009710f,-0.0009431f,-0.0008993f,-0.0008404f,-0.0007676f,-0.0006821f,-0.0005854f,-0.0004794f,-0.0003658f,-0.0002467f,-0.0001240f,0.0000000f,0.0001233f,0.0002437f,0.0003593f,0.0004681f,0.0005683f,0.0006581f,0.0007362f,0.0008014f,0.0008524f,0.0008886f,0.0009095f,0.0009147f,0.0009043f,0.0008785f,0.0008378f,0.0007831f,0.0007154f,0.0006358f,0.0005458f,0.0004471f,0.0003412f,0.0002301f,0.0001157f,0.0000000f,-0.0001151f,-0.0002276f,-0.0003356f,-0.0004372f,-0.0005309f,-0.0006150f,-0.0006881f,-0.0007491f,-0.0007970f,-0.0008310f,-0.0008506f,-0.0008557f,-0.0008461f,-0.0008221f,-0.0007842f,-0.0007332f,-0.0006698f,-0.0005954f,-0.0005113f,-0.0004188f,-0.0003197f,-0.0002157f,-0.0001085f,0.0000000f,0.0001079f,0.0002134f,0.0003148f,0.0004102f,0.0004981f,0.0005771f,0.0006459f,0.0007032f,0.0007483f,0.0007804f,0.0007990f,0.0008038f,0.0007949f,0.0007725f,0.0007370f,0.0006892f,0.0006298f,0.0005599f,0.0004808f,0.0003939f,0.0003008f,0.0002029f,0.0001021f,0.0000000f,-0.0001016f,-0.0002009f,-0.0002964f,-0.0003863f,-0.0004692f,-0.0005437f,-0.0006085f,-0.0006627f,-0.0007052f,-0.0007356f,-0.0007532f,-0.0007579f,-0.0007496f,-0.0007286f,-0.0006952f,-0.0006502f,-0.0005942f,-0.0005284f,-0.0004538f,-0.0003719f,-0.0002839f,-0.0001916f,-0.0000964f};

    //Filter Order: 480 Sampling Frequency (Hz): 48000.000000 Cut-Off Frequency Lo (Hz): 2000.000000 Cut-Off Frequency Hi (Hz): 20.000000
    private float[] coefficients = {0.0000000f,-0.0017529f,-0.0034599f,-0.0050018f,-0.0062651f,-0.0071503f,-0.0075788f,-0.0074991f,-0.0068916f,-0.0057713f,-0.0041883f,-0.0022266f,0.0000000f,0.0023538f,0.0046810f,0.0068206f,0.0086145f,0.0099182f,0.0106103f,0.0106022f,0.0098452f,0.0083363f,0.0061213f,0.0032954f,0.0000000f,-0.0035819f,-0.0072343f,-0.0107181f,-0.0137832f,-0.0161823f,-0.0176839f,-0.0180861f,-0.0172290f,-0.0150053f,-0.0113682f,-0.0063373f,0.0000000f,0.0074895f,0.0159155f,0.0250088f,0.0344581f,0.0439234f,0.0530516f,0.0614927f,0.0689161f,0.0750264f,0.0795775f,0.0823847f,0.0833333f,0.0823847f,0.0795775f,0.0750264f,0.0689161f,0.0614927f,0.0530516f,0.0439234f,0.0344581f,0.0250088f,0.0159155f,0.0074895f,0.0000000f,-0.0063373f,-0.0113682f,-0.0150053f,-0.0172290f,-0.0180861f,-0.0176839f,-0.0161823f,-0.0137832f,-0.0107181f,-0.0072343f,-0.0035819f,0.0000000f,0.0032954f,0.0061213f,0.0083363f,0.0098452f,0.0106022f,0.0106103f,0.0099182f,0.0086145f,0.0068206f,0.0046810f,0.0023538f,0.0000000f,-0.0022266f,-0.0041883f,-0.0057713f,-0.0068916f,-0.0074991f,-0.0075788f,-0.0071503f,-0.0062651f,-0.0050018f,-0.0034599f,-0.0017529f,0.0000000f,0.0016813f,0.0031831f,0.0044133f,0.0053012f,0.0058012f,0.0058946f,0.0055902f,0.0049226f,0.0039488f,0.0027441f,0.0013964f,0.0000000f,-0.0013506f,-0.0025670f,-0.0035727f,-0.0043073f,-0.0047302f,-0.0048229f,-0.0045890f,-0.0040539f,-0.0032620f,-0.0022736f,-0.0011603f,0.0000000f,0.0011286f,0.0021507f,0.0030011f,0.0036272f,0.0039930f,0.0040809f,0.0038919f,0.0034458f,0.0027788f,0.0019409f,0.0009926f,0.0000000f,-0.0009692f,-0.0018506f,-0.0025871f,-0.0031326f,-0.0034546f,-0.0035368f,-0.0033787f,-0.0029964f,-0.0024202f,-0.0016931f,-0.0008672f,0.0000000f,0.0008493f,0.0016240f,0.0022735f,0.0027566f,0.0030442f,0.0031207f,0.0029851f,0.0026506f,0.0021436f,0.0015015f,0.0007700f,0.0000000f,-0.0007558f,-0.0014469f,-0.0020277f,-0.0024613f,-0.0027209f,-0.0027922f,-0.0026736f,-0.0023764f,-0.0019238f,-0.0013488f,-0.0006923f,0.0000000f,0.0006809f,0.0013045f,0.0018299f,0.0022231f,0.0024597f,0.0025263f,0.0024210f,0.0021536f,0.0017448f,0.0012243f,0.0006289f,0.0000000f,-0.0006194f,-0.0011877f,-0.0016673f,-0.0020269f,-0.0022443f,-0.0023066f,-0.0022120f,-0.0019690f,-0.0015963f,-0.0011208f,-0.0005761f,0.0000000f,0.0005682f,0.0010901f,0.0015312f,0.0018626f,0.0020635f,0.0021221f,0.0020362f,0.0018136f,0.0014711f,0.0010335f,0.0005315f,0.0000000f,-0.0005247f,-0.0010073f,-0.0014156f,-0.0017229f,-0.0019097f,-0.0019649f,-0.0018863f,-0.0016809f,-0.0013641f,-0.0009588f,-0.0004933f,0.0000000f,0.0004875f,0.0009362f,0.0013163f,0.0016027f,0.0017772f,0.0018294f,0.0017569f,0.0015663f,0.0012716f,0.0008941f,0.0004602f,0.0000000f,-0.0004552f,-0.0008745f,-0.0012299f,-0.0014982f,-0.0016620f,-0.0017113f,-0.0016442f,-0.0014663f,-0.0011909f,-0.0008377f,-0.0004313f,0.0000000f,0.0004269f,0.0008204f,0.0011543f,0.0014065f,0.0015607f,0.0016076f,0.0015450f,0.0013783f,0.0011198f,0.0007879f,0.0004058f,0.0000000f,-0.0004019f,-0.0007726f,-0.0010873f,-0.0013253f,-0.0014711f,-0.0015158f,-0.0014572f,-0.0013003f,-0.0010567f,-0.0007437f,-0.0003832f,0.0000000f,0.0003797f,0.0007301f,0.0010278f,0.0012530f,0.0013912f,0.0014338f,0.0013788f,0.0012306f,0.0010004f,0.0007042f,0.0003629f,0.0000000f,-0.0003598f,-0.0006920f,-0.0009744f,-0.0011882f,-0.0013196f,-0.0013603f,-0.0013084f,-0.0011681f,-0.0009497f,-0.0006687f,-0.0003447f,0.0000000f,0.0003418f,0.0006577f,0.0009263f,0.0011298f,0.0012550f,0.0012939f,0.0012448f,0.0011116f,0.0009039f,0.0006366f,0.0003282f,0.0000000f,-0.0003256f,-0.0006266f,-0.0008827f,-0.0010768f,-0.0011964f,-0.0012338f,-0.0011871f,-0.0010602f,-0.0008624f,-0.0006075f,-0.0003132f,0.0000000f,0.0003109f,0.0005983f,0.0008430f,0.0010286f,0.0011430f,0.0011789f,0.0011346f,0.0010135f,0.0008245f,0.0005809f,0.0002996f,0.0000000f,-0.0002974f,-0.0005725f,-0.0008067f,-0.0009845f,-0.0010942f,-0.0011288f,-0.0010864f,-0.0009706f,-0.0007898f,-0.0005565f,-0.0002871f,0.0000000f,0.0002851f,0.0005488f,0.0007735f,0.0009441f,0.0010494f,0.0010827f,0.0010422f,0.0009313f,0.0007578f,0.0005341f,0.0002755f,0.0000000f,-0.0002737f,-0.0005270f,-0.0007428f,-0.0009068f,-0.0010081f,-0.0010402f,-0.0010015f,-0.0008950f,-0.0007284f,-0.0005134f,-0.0002649f,0.0000000f,0.0002632f,0.0005069f,0.0007145f,0.0008724f,0.0009699f,0.0010010f,0.0009638f,0.0008615f,0.0007012f,0.0004943f,0.0002551f,0.0000000f,-0.0002535f,-0.0004882f,-0.0006883f,-0.0008404f,-0.0009345f,-0.0009646f,-0.0009289f,-0.0008303f,-0.0006759f,-0.0004765f,-0.0002459f,0.0000000f,0.0002445f,0.0004709f,0.0006640f,0.0008108f,0.0009017f,0.0009307f,0.0008964f,0.0008014f,0.0006524f,0.0004600f,0.0002374f,0.0000000f,-0.0002361f,-0.0004547f,-0.0006413f,-0.0007831f,-0.0008710f,-0.0008992f,-0.0008661f,-0.0007743f,-0.0006305f,-0.0004446f,-0.0002295f,0.0000000f,0.0002282f,0.0004397f,0.0006201f,0.0007573f,0.0008424f,0.0008697f,0.0008378f,0.0007491f,0.0006100f,0.0004301f,0.0002221f,0.0000000f,-0.0002209f,-0.0004255f,-0.0006002f,-0.0007332f,-0.0008156f,-0.0008421f,-0.0008112f,-0.0007254f,-0.0005908f,-0.0004166f,-0.0002151f,0.0000000f,0.0002140f,0.0004123f,0.0005816f,0.0007105f,0.0007904f,0.0008162f,0.0007864f,0.0007032f,0.0005727f,0.0004039f,0.0002086f,0.0000000f,-0.0002075f,-0.0003999f,-0.0005641f,-0.0006892f,-0.0007667f,-0.0007918f,-0.0007629f,-0.0006823f,-0.0005558f,-0.0003920f,-0.0002024f,0.0000000f,0.0002014f,0.0003882f,0.0005476f,0.0006691f,0.0007445f,0.0007689f,0.0007409f,0.0006627f,0.0005398f,0.0003808f,0.0001966f,0.0000000f,-0.0001957f,-0.0003771f,-0.0005321f,-0.0006502f,-0.0007234f,-0.0007472f,-0.0007201f,-0.0006441f,-0.0005247f,-0.0003701f,-0.0001911f};


    private float[] buffer;

    public LowPassFilter() {
        this.buffer = new float[SAMPLE_SIZE];
        for(int i = 0; i < SAMPLE_SIZE; i++) this.buffer[i] = 0;
    }

    public float filter(float input) {
        float v = 0;

        for(int i = SAMPLE_SIZE - 1; i > 0; i--) {
            buffer[i] = buffer[i - 1];
            v += buffer[i] * coefficients[SAMPLE_SIZE - i - 1];
        }

        buffer[0] = input;
        v += input * coefficients[SAMPLE_SIZE - 1];
        return v;
    }
}
